(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{3998:(e,t,s)=>{"use strict";s.d(t,{$:()=>o,r:()=>d});var r=s(95155),a=s(12115),l=s(17129),n=s(83101),i=s(64269);let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:s,variant:a,size:n,asChild:o=!1,...c}=e,u=o?l.DX:"button";return(0,r.jsx)(u,{className:(0,i.cn)(d({variant:a,size:n,className:s})),ref:t,...c})});o.displayName="Button"},8769:(e,t,s)=>{"use strict";s.d(t,{j:()=>l,s:()=>a});var r=s(15804);async function a(e){return r.uE.post("bookings",{body:e})}async function l(e){return r.uE.get("bookings",{withAuth:!0,...e})}},11647:(e,t,s)=>{"use strict";s.d(t,{E:()=>i});var r=s(95155);s(12115);var a=s(83101),l=s(64269);let n=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,l.cn)(n({variant:s}),t),...a})}},15804:(e,t,s)=>{"use strict";s.d(t,{uE:()=>d});let r={baseUrl:"https://api.hadispatch.com/api".trim()||""};var a=s(68954);class l extends Error{constructor(e,t,s){super(e),this.status=t,this.data=s}}async function n(e){let t=await e.text();if(!t)return null;try{return JSON.parse(t)}catch(e){return t}}async function i(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{body:i,query:d,withAuth:o,headers:c,...u}=s,m=function(e,t){if(!r.baseUrl)throw Error("NEXT_PUBLIC_API_BASE_URL is required; set it to your API origin (e.g., https://api.example.com/api).");if(!r.baseUrl)throw Error("API base URL missing; set NEXT_PUBLIC_API_BASE_URL.");let s=r.baseUrl.endsWith("/")?r.baseUrl:"".concat(r.baseUrl,"/"),a=new URL(e.replace(/^\//,""),s);return t&&Object.entries(t).forEach(e=>{let[t,s]=e;void 0!==s&&a.searchParams.append(t,String(s))}),a.toString()}(e,d),x=function(e,t,s){let r=new Headers(e);if(t instanceof FormData||r.set("Content-Type","application/json"),r.set("Accept","application/json"),s){let e=(0,a.lR)();e&&r.set("Authorization","Bearer ".concat(e))}return r}(c,i,o),p=i instanceof FormData?i:i?JSON.stringify(i):void 0,h=await fetch(m,{method:t,headers:x,body:p,...u}),f=await n(h);if(!h.ok){var g;throw new l(null!=(g=null==f?void 0:f.message)?g:"Request failed",h.status,f)}return f}let d={get:(e,t)=>i(e,"GET",t),post:(e,t)=>i(e,"POST",t),put:(e,t)=>i(e,"PUT",t),patch:(e,t)=>i(e,"PATCH",t),delete:(e,t)=>i(e,"DELETE",t)}},21081:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s(95155),a=s(52619),l=s.n(a),n=s(12115),i=s(86948),d=s(3998),o=s(11647),c=s(65142),u=s(8769),m=s(15804);async function x(){try{return await m.uE.get("dashboard/summary",{withAuth:!0})}catch(e){return null}}async function p(e){try{return((await m.uE.get("tms/loads",{withAuth:!0,query:{status:"posted"}})).data||[]).map(e=>{var t;let s=(e.rate_to_client||0)+(e.fuel_surcharge||0),r=e.distance_miles||0,{lane:a,pickup:l}=(e=>{let t=[...e||[]].sort((e,t)=>{var s,r;return(null!=(s=e.sequence)?s:0)-(null!=(r=t.sequence)?r:0)}),s=t[0],r=t[t.length-1],a=s?"".concat(s.city||"TBD",", ").concat(s.state||"").trim():"TBD",l=r?"".concat(r.city||"TBD",", ").concat(r.state||"").trim():"TBD",n=(null==s?void 0:s.date_from)||(null==s?void 0:s.date_to)||null;return{lane:"".concat(a," → ").concat(l),pickup:n}})(e.stops),n=e.trailer_type||e.equipment_requirements||"—";return{id:String(e.id),lane:a,equipment:n,rpm:r>0?s/r:null,pickup:l,status:e.status,client:(null==(t=e.client)?void 0:t.name)||void 0}}).filter(t=>{if(null==e?void 0:e.equipment){let s=e.equipment.toLowerCase();if(!t.equipment.toLowerCase().includes(s))return!1}return null==e||!e.minRpm||null===t.rpm||!(t.rpm<e.minRpm)})}catch(e){return[]}}var h=s(87358);async function f(){if(!(void 0!==h&&"https://api.hadispatch.com/api".trim().length>0))return{sections:[],settings:{},media:{hero_image_url:null,why_choose_us_image_url:null,for_shippers_image_url:null,for_brokers_image_url:null,testimonial_avatar_1_url:null,testimonial_avatar_2_url:null,testimonial_avatar_3_url:null}};try{var e;let t=await m.uE.get("landing-page");return null!=(e=null==t?void 0:t.data)?e:t}catch(e){return{sections:[],settings:{},media:{hero_image_url:null,why_choose_us_image_url:null,for_shippers_image_url:null,for_brokers_image_url:null,testimonial_avatar_1_url:null,testimonial_avatar_2_url:null,testimonial_avatar_3_url:null}}}}function g(){var e,t,s,a,m,h,g,v,j,N,b,y,_,w,R;let[S,k]=(0,n.useState)([]),[E,C]=(0,n.useState)(null),[B,T]=(0,n.useState)([]),[L,P]=(0,n.useState)(null),[q,Z]=(0,n.useState)(!0),[A,D]=(0,n.useState)(null),[U,I]=(0,n.useState)({});(0,n.useEffect)(()=>{!async function(){var e,t;try{let[t,s,r,a]=await Promise.all([(0,u.j)(),x(),p(U),f()]);k(null!=(e=t.bookings)?e:[]),C(s),T(r),P(a)}catch(e){D(null!=(t=null==e?void 0:e.message)?t:"Unable to load dashboard data. Login may be required.")}finally{Z(!1)}}()},[U]);let W=!A||A&&!/unauthorized|401/i.test(A);return(0,r.jsxs)("div",{className:"container mx-auto py-16 px-4 md:px-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Operations Dashboard"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Bookings, lead magnet submissions, load previews, and site SEO/marketing."})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,r.jsx)(d.$,{asChild:!0,variant:"outline",children:(0,r.jsx)(l(),{href:"/#lead-magnet",children:"New lead magnet"})}),(0,r.jsx)(d.$,{asChild:!0,children:(0,r.jsx)(l(),{href:"/#book",children:"Book a call"})})]})]}),(0,r.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[(0,r.jsxs)(i.Zp,{children:[(0,r.jsx)(i.aR,{className:"pb-2",children:(0,r.jsx)(i.ZB,{className:"text-sm text-muted-foreground",children:"Loads this month"})}),(0,r.jsx)(i.Wu,{children:(0,r.jsx)("p",{className:"text-3xl font-bold",children:null!=(_=null==E?void 0:E.loadsThisMonth)?_:"—"})})]}),(0,r.jsxs)(i.Zp,{children:[(0,r.jsx)(i.aR,{className:"pb-2",children:(0,r.jsx)(i.ZB,{className:"text-sm text-muted-foreground",children:"Avg rate per mile"})}),(0,r.jsx)(i.Wu,{children:(0,r.jsx)("p",{className:"text-3xl font-bold",children:(null==E?void 0:E.avgRatePerMile)?"$".concat(E.avgRatePerMile.toFixed(2)):"—"})})]}),(0,r.jsxs)(i.Zp,{children:[(0,r.jsx)(i.aR,{className:"pb-2",children:(0,r.jsx)(i.ZB,{className:"text-sm text-muted-foreground",children:"Next settlement"})}),(0,r.jsxs)(i.Wu,{className:"space-y-1",children:[(0,r.jsx)("p",{className:"text-xl font-semibold",children:(null==E?void 0:E.nextSettlement)?"$".concat(E.nextSettlement.amount.toLocaleString()):"—"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm",children:(null==E||null==(e=E.nextSettlement)?void 0:e.date)?new Date(E.nextSettlement.date).toLocaleDateString():"—"}),(null==E||null==(s=E.nextSettlement)||null==(t=s.issues)?void 0:t.length)?(0,r.jsxs)("p",{className:"text-xs text-amber-600",children:["Issues: ",E.nextSettlement.issues.join(", ")]}):null]})]})]}),q&&(0,r.jsx)(i.Zp,{className:"shadow-sm",children:(0,r.jsx)(i.Wu,{className:"py-8 text-muted-foreground",children:"Loading dashboard data..."})}),!q&&A&&(0,r.jsxs)(i.Zp,{className:"shadow-sm",children:[(0,r.jsx)(i.aR,{children:(0,r.jsx)(i.ZB,{className:"text-lg",children:"Sign in required"})}),(0,r.jsxs)(i.Wu,{className:"space-y-4 text-muted-foreground",children:[(0,r.jsx)("p",{children:A}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(d.$,{asChild:!0,children:(0,r.jsx)(l(),{href:"/login",children:"Login"})}),(0,r.jsx)(d.$,{asChild:!0,variant:"outline",children:(0,r.jsx)(l(),{href:"/#booking",children:"Back to site"})})]})]})]}),!q&&!A&&(0,r.jsxs)(i.Zp,{className:"shadow-sm",children:[(0,r.jsx)(i.aR,{children:(0,r.jsx)(i.ZB,{className:"text-lg",children:"Recent submissions"})}),(0,r.jsx)(i.Wu,{className:"overflow-x-auto",children:0===S.length?(0,r.jsx)("p",{className:"text-muted-foreground",children:"No submissions yet."}):(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{className:"text-muted-foreground",children:(0,r.jsxs)("tr",{className:"border-b",children:[(0,r.jsx)("th",{className:"py-2 pr-4 text-left",children:"Title"}),(0,r.jsx)("th",{className:"py-2 pr-4 text-left",children:"Type"}),(0,r.jsx)("th",{className:"py-2 pr-4 text-left",children:"When"}),(0,r.jsx)("th",{className:"py-2 pr-4 text-left",children:"Contact"}),(0,r.jsx)("th",{className:"py-2 pr-4 text-left",children:"Status"})]})}),(0,r.jsx)("tbody",{children:S.map(e=>(0,r.jsxs)("tr",{className:"border-b last:border-0",children:[(0,r.jsx)("td",{className:"py-3 pr-4",children:e.title}),(0,r.jsx)("td",{className:"py-3 pr-4 capitalize",children:e.type}),(0,r.jsx)("td",{className:"py-3 pr-4 text-muted-foreground",children:new Date(e.start_at).toLocaleString()}),(0,r.jsxs)("td",{className:"py-3 pr-4 text-muted-foreground",children:[e.email||"—",e.phone?" \xb7 ".concat(e.phone):""]}),(0,r.jsx)("td",{className:"py-3 pr-4",children:(0,r.jsx)(o.E,{variant:"pending"===e.status?"secondary":"default",children:e.status})})]},e.id))})]})})]}),!q&&W&&(0,r.jsxs)(i.Zp,{className:"shadow-sm",children:[(0,r.jsx)(i.aR,{className:"flex flex-col gap-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(i.ZB,{className:"text-lg",children:"Load board preview"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(c.p,{placeholder:"Equipment (e.g., Reefer)",value:null!=(w=U.equipment)?w:"",onChange:e=>I(t=>({...t,equipment:e.target.value||void 0})),className:"h-9 w-44"}),(0,r.jsx)(c.p,{placeholder:"Min RPM",type:"number",value:null!=(R=U.minRpm)?R:"",onChange:e=>I(t=>({...t,minRpm:e.target.value?Number(e.target.value):void 0})),className:"h-9 w-28"})]})]})}),(0,r.jsx)(i.Wu,{className:"overflow-x-auto",children:0===B.length?(0,r.jsx)("p",{className:"text-muted-foreground",children:"No loads match the current filters."}):(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{className:"text-muted-foreground",children:(0,r.jsxs)("tr",{className:"border-b",children:[(0,r.jsx)("th",{className:"py-2 pr-4 text-left",children:"Lane"}),(0,r.jsx)("th",{className:"py-2 pr-4 text-left",children:"Equipment"}),(0,r.jsx)("th",{className:"py-2 pr-4 text-left",children:"RPM"}),(0,r.jsx)("th",{className:"py-2 pr-4 text-left",children:"Pickup"}),(0,r.jsx)("th",{className:"py-2 pr-4 text-left",children:"Status"})]})}),(0,r.jsx)("tbody",{children:B.map(e=>(0,r.jsxs)("tr",{className:"border-b last:border-0",children:[(0,r.jsx)("td",{className:"py-3 pr-4",children:e.lane}),(0,r.jsx)("td",{className:"py-3 pr-4",children:e.equipment}),(0,r.jsx)("td",{className:"py-3 pr-4",children:null!==e.rpm?"$".concat(e.rpm.toFixed(2),"/mi"):"—"}),(0,r.jsx)("td",{className:"py-3 pr-4 text-muted-foreground",children:e.pickup?new Date(e.pickup).toLocaleDateString():"—"}),(0,r.jsx)("td",{className:"py-3 pr-4 capitalize text-muted-foreground",children:e.status||"posted"})]},e.id))})]})})]}),!q&&(0,r.jsxs)(i.Zp,{className:"shadow-sm",children:[(0,r.jsx)(i.aR,{children:(0,r.jsx)(i.ZB,{className:"text-lg",children:"SEO & marketing snapshot"})}),(0,r.jsxs)(i.Wu,{className:"grid gap-4 md:grid-cols-3",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-[0.08em]",children:"Meta title"}),(0,r.jsx)("p",{className:"text-sm",children:(null==L||null==(a=L.settings)?void 0:a.meta_title)||"—"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:(null==L||null==(m=L.settings)?void 0:m.meta_description)||"—"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-[0.08em]",children:"Brand & contact"}),(0,r.jsxs)("p",{className:"text-sm",children:[(null==L||null==(h=L.settings)?void 0:h.site_name)||"—"," \xb7 ",(null==L||null==(g=L.settings)?void 0:g.contact_email)||"—"]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:(null==L||null==(v=L.settings)?void 0:v.contact_phone)||"—"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-[0.08em]",children:"Hero badge/CTA"}),(0,r.jsx)("p",{className:"text-sm",children:(null==(N=((null==L?void 0:L.sections)||[]).find(e=>"hero"===e.slug))||null==(j=N.content)?void 0:j.badge)||"—"}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["CTA: ",(null==(y=((null==L?void 0:L.sections)||[]).find(e=>"hero"===e.slug))||null==(b=y.content)?void 0:b.cta_primary)||"—"]})]})]})]})]})}},46092:(e,t,s)=>{Promise.resolve().then(s.bind(s,21081))},64269:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var r=s(2821),a=s(75889);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},65142:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var r=s(95155),a=s(12115),l=s(64269);let n=a.forwardRef((e,t)=>{let{className:s,type:a,value:n,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...void 0!==n?{value:null===n?"":n}:{},...i})});n.displayName="Input"},68954:(e,t,s)=>{"use strict";s.d(t,{NQ:()=>l,Tp:()=>n,lR:()=>a});let r="dispatchpro.authToken";function a(){return window.localStorage.getItem(r)}function l(e){window.localStorage.setItem(r,e)}function n(){window.localStorage.removeItem(r)}},86948:(e,t,s)=>{"use strict";s.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>n,aR:()=>i});var r=s(95155),a=s(12115),l=s(64269);let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});n.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...a})});i.displayName="CardHeader";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});d.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...a})});o.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",s),...a})});c.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"}},e=>{e.O(0,[923,441,255,358],()=>e(e.s=46092)),_N_E=e.O()}]);